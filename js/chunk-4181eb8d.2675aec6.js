(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4181eb8d"],{"49a0":function(t,a,e){"use strict";var n=e("b70c"),i=e.n(n);i.a},"8f72":function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=this,e=a.$createElement,n=a._self._c||e;return n("div",{staticStyle:{background:"#eee"}},[n("div",{staticClass:"title"},[n("span",{staticClass:"iconfont icon-left gobackIcon",on:{click:function(){t.$router.go(-1)}}}),n("p",[a._v("商品编辑")])]),n("div",[n("van-cell-group",{staticClass:"groupSty"},[n("van-field",{staticClass:"inputSty",attrs:{label:"商品名称","input-align":"right"},model:{value:a.addInfo.productName,callback:function(t){a.$set(a.addInfo,"productName",t)},expression:"addInfo.productName"}}),n("van-cell",{staticClass:"inputSty",attrs:{title:"商品主图"},on:{click:function(){a.clickIndex=1}}},[n("van-uploader",{attrs:{"max-count":1,"preview-size":"30","after-read":a.afterRead},model:{value:a.addInfo.mainImage,callback:function(t){a.$set(a.addInfo,"mainImage",t)},expression:"addInfo.mainImage"}})],1),n("van-cell",{staticClass:"inputSty",attrs:{title:"商品轮播图"},on:{click:function(){a.clickIndex=2}}},[n("van-uploader",{attrs:{"preview-size":"30","after-read":a.afterRead},model:{value:a.addInfo.slideshow,callback:function(t){a.$set(a.addInfo,"slideshow",t)},expression:"addInfo.slideshow"}})],1),n("van-cell",{staticClass:"inputSty",attrs:{title:"商品详情图"},on:{click:function(){a.clickIndex=3}}},[n("van-uploader",{attrs:{"preview-size":"30","max-count":1,"after-read":a.afterRead},model:{value:a.addInfo.productsDetail,callback:function(t){a.$set(a.addInfo,"productsDetail",t)},expression:"addInfo.productsDetail"}})],1),n("van-field",{staticClass:"inputSty",attrs:{rows:"2",autosize:"",label:"商品简介",type:"textarea","show-word-limit":""},model:{value:a.addInfo.intro,callback:function(t){a.$set(a.addInfo,"intro",t)},expression:"addInfo.intro"}}),n("van-field",{staticClass:"inputSty",attrs:{label:"商品分类","input-align":"right",disabled:""}},[n("van-dropdown-menu",{attrs:{slot:"button"},slot:"button"},[n("van-dropdown-item",{attrs:{options:a.categoryIdItem},model:{value:a.addInfo.categoryId,callback:function(t){a.$set(a.addInfo,"categoryId",t)},expression:"addInfo.categoryId"}})],1)],1),n("van-field",{staticClass:"inputSty",attrs:{type:"number",label:"商品库存","input-align":"right"},model:{value:a.addInfo.stock,callback:function(t){a.$set(a.addInfo,"stock",t)},expression:"addInfo.stock"}}),n("van-field",{staticClass:"inputSty",attrs:{type:"number",label:"商品邮费","input-align":"right"},model:{value:a.addInfo.carriage,callback:function(t){a.$set(a.addInfo,"carriage",t)},expression:"addInfo.carriage"}},[n("span",{attrs:{slot:"right-icon"},slot:"right-icon"},[a._v("元")])])],1),n("van-cell-group",{staticClass:"groupSty"},[n("p",[a._v("商品价格")]),n("van-field",{staticClass:"inputSty",attrs:{type:"number",label:"零售价","input-align":"right"},model:{value:a.addInfo.retailPrice,callback:function(t){a.$set(a.addInfo,"retailPrice",t)},expression:"addInfo.retailPrice"}},[n("span",{attrs:{slot:"right-icon"},slot:"right-icon"},[a._v("元")])]),n("van-field",{staticClass:"inputSty",attrs:{type:"number",label:"原价","input-align":"right"},model:{value:a.addInfo.originPrice,callback:function(t){a.$set(a.addInfo,"originPrice",t)},expression:"addInfo.originPrice"}},[n("span",{attrs:{slot:"right-icon"},slot:"right-icon"},[a._v("元")])]),n("van-field",{staticClass:"inputSty",attrs:{type:"number",label:"供货价","input-align":"right"},model:{value:a.addInfo.supplyPrice,callback:function(t){a.$set(a.addInfo,"supplyPrice",t)},expression:"addInfo.supplyPrice"}},[n("span",{attrs:{slot:"right-icon"},slot:"right-icon"},[a._v("元")])]),n("van-field",{staticClass:"inputSty",attrs:{type:"number",label:"钻卡价格","input-align":"right"},model:{value:a.addInfo.diamondPrice,callback:function(t){a.$set(a.addInfo,"diamondPrice",t)},expression:"addInfo.diamondPrice"}},[n("span",{attrs:{slot:"right-icon"},slot:"right-icon"},[a._v("元")])]),n("van-field",{staticClass:"inputSty",attrs:{type:"number",label:"金卡价格","input-align":"right"},model:{value:a.addInfo.goldPrice,callback:function(t){a.$set(a.addInfo,"goldPrice",t)},expression:"addInfo.goldPrice"}},[n("span",{attrs:{slot:"right-icon"},slot:"right-icon"},[a._v("元")])]),n("van-field",{staticClass:"inputSty",attrs:{label:"银卡价格","input-align":"right"},model:{value:a.addInfo.silverPrice,callback:function(t){a.$set(a.addInfo,"silverPrice",t)},expression:"addInfo.silverPrice"}},[n("span",{attrs:{slot:"right-icon"},slot:"right-icon"},[a._v("元")])]),n("van-field",{staticClass:"inputSty",attrs:{label:"团购价格","input-align":"right"},model:{value:a.addInfo.groupPrice,callback:function(t){a.$set(a.addInfo,"groupPrice",t)},expression:"addInfo.groupPrice"}},[n("span",{attrs:{slot:"right-icon"},slot:"right-icon"},[a._v("元")])])],1),n("van-cell-group",{staticClass:"groupSty"},[n("p",[a._v("数量")]),n("van-field",{staticClass:"inputSty",attrs:{type:"number",label:"钻卡数量","input-align":"right"},model:{value:a.addInfo.diamondNum,callback:function(t){a.$set(a.addInfo,"diamondNum",t)},expression:"addInfo.diamondNum"}},[n("span",{attrs:{slot:"right-icon"},slot:"right-icon"},[a._v("张")])]),n("van-field",{staticClass:"inputSty",attrs:{type:"number",label:"金卡数量","input-align":"right"},model:{value:a.addInfo.goldNum,callback:function(t){a.$set(a.addInfo,"goldNum",t)},expression:"addInfo.goldNum"}},[n("span",{attrs:{slot:"right-icon"},slot:"right-icon"},[a._v("张")])]),n("van-field",{staticClass:"inputSty",attrs:{type:"number",label:"钻卡数量","input-align":"right"},model:{value:a.addInfo.silverNum,callback:function(t){a.$set(a.addInfo,"silverNum",t)},expression:"addInfo.silverNum"}},[n("span",{attrs:{slot:"right-icon"},slot:"right-icon"},[a._v("张")])]),n("van-field",{staticClass:"inputSty",attrs:{type:"number",label:"团购数量","input-align":"right"},model:{value:a.addInfo.groupNum,callback:function(t){a.$set(a.addInfo,"groupNum",t)},expression:"addInfo.groupNum"}},[n("span",{attrs:{slot:"right-icon"},slot:"right-icon"},[a._v("张")])])],1),n("van-cell-group",{staticClass:"groupSty"},[n("p",[a._v("分销比例")]),n("van-field",{staticClass:"inputSty",attrs:{type:"number",label:"一级分销比例","input-align":"right"},model:{value:a.addInfo.distribution1,callback:function(t){a.$set(a.addInfo,"distribution1",t)},expression:"addInfo.distribution1"}}),n("van-field",{staticClass:"inputSty",attrs:{type:"number",label:"二级分销比例","input-align":"right"},model:{value:a.addInfo.distribution2,callback:function(t){a.$set(a.addInfo,"distribution2",t)},expression:"addInfo.distribution2"}})],1),n("van-cell-group",{staticClass:"groupSty"},[n("van-cell",{staticClass:"inputSty",attrs:{title:"合法批文图片或文字："},on:{click:function(){a.clickIndex=4}}},[n("van-uploader",{attrs:{"max-count":1,"preview-size":"30","after-read":a.afterRead},model:{value:a.addInfo.approval,callback:function(t){a.$set(a.addInfo,"approval",t)},expression:"addInfo.approval"}})],1)],1),n("van-cell-group",{staticClass:"groupSty"},[n("van-field",{staticClass:"inputSty",attrs:{rows:"2",autosize:"",label:"服务保障",type:"textarea","show-word-limit":""},model:{value:a.addInfo.guarantee,callback:function(t){a.$set(a.addInfo,"guarantee",t)},expression:"addInfo.guarantee"}})],1),n("van-cell-group",{staticClass:"groupSty"},[n("van-field",{staticClass:"inputSty",attrs:{rows:"2",autosize:"",label:"文字保障",type:"textarea","show-word-limit":""},model:{value:a.addInfo.benefits,callback:function(t){a.$set(a.addInfo,"benefits",t)},expression:"addInfo.benefits"}})],1),n("van-cell-group",{staticClass:"groupSty"},[n("van-field",{staticClass:"inputSty",attrs:{rows:"2",autosize:"",label:"详细参数",type:"textarea","show-word-limit":""},model:{value:a.addInfo.parameter,callback:function(t){a.$set(a.addInfo,"parameter",t)},expression:"addInfo.parameter"}})],1)],1),n("div",{staticClass:"bottomBtn"},[n("van-button",{staticClass:"btn",attrs:{block:""},on:{click:function(t){return a.submitProductInfo()}}},[a._v("确认提交")])],1)])},i=[],o=(e("4160"),e("b0c0"),e("b64b"),e("159b"),{data:function(){return{clickIndex:-1,categoryIdItem:[],addInfo:{id:0,carriage:0,categoryId:1,intro:"",mainImage:[],productName:"",productsDetail:[],slideshow:[],stock:0,retailPrice:0,originPrice:0,supplyPrice:0,diamondPrice:0,goldPrice:0,silverPrice:0,groupPrice:0,diamondNum:0,goldNum:0,silverNum:0,groupNum:0,approval:[],guarantee:"",parameter:"",benefits:"",distribution1:0,distribution2:0},productsDetailImageItem:[],slideshowImageItem:[],approvalImageItem:[]}},created:function(){var t=this;this.$axios.get("ym/mall-product-category/list?parentId=0").then((function(a){console.log(a),0===a.code?a.data.forEach((function(a){t.categoryIdItem.push({text:a.name,value:a.id})})):console.log("获取商品分类错误")}))},methods:{afterRead:function(t){switch(console.log(t),console.log(this.clickIndex),this.clickIndex){case 1:console.log(1),this.imageUpload(this.addInfo.mainImage[0]);break;case 2:this.imageUpload(t);break;case 3:this.imageUpload(this.addInfo.productsDetail[0]);break;case 4:this.imageUpload(this.addInfo.approval[0]);break;default:return!1}},submitProductInfo:function(){var t=this;console.log(this.addInfo);var a=Object.assign({},this.addInfo);a.slideshow=this.copyArray(this.addInfo.slideshow),a.approval=this.addInfo.approval[0],a.mainImage=this.addInfo.mainImage[0],a.productsDetail=this.addInfo.productsDetail[0],console.log(a),console.log(this.addInfo),this.$axios.post("ym/online-merchant-product/add",a).then((function(a){console.log(a),0===a.data.code?(t.$Toast("商品添加成功"),Object.keys(t.addInfo).forEach((function(a){t.addInfo[a]="mainImage"==a||"productsDetail"==a||"slideshow"==a||"approval"==a?[]:"intro"==a||"guarantee"==a||"parameter"==a||"benefits"==a||"productName"==a?"":0}))):t.$Toast("商品添加失败")}))},imageUpload:function(t){var a=this,e=new FormData,n={headers:{Authorization:"bearer"+JSON.parse(this.$store.state.userInfo).access_token,"Content-Type":"form-data"}};e.append("files",t.file),this.$axios.post("ym/oss-attachment/upload-image",e,n).then((function(t){if(console.log(t),0===t.data.code)switch(console.log(a.clickIndex),a.clickIndex){case 1:a.addInfo.mainImage[0]=t.data.data[0].imgSrc;break;case 2:a.slideshowImageItem.push({url:t.data.data[0].imgSrc}),a.addInfo.slideshow=a.slideshowImageItem;break;case 3:a.addInfo.productsDetail[0]=t.data.data[0].imgSrc;break;case 4:a.addInfo.approval[0]=t.data.data[0].imgSrc;break;default:console.log("错误")}}))},copyArray:function(t){var a=[];return t.forEach((function(t){a.push(t.url)})),a}}}),s=o,l=(e("49a0"),e("2877")),d=Object(l["a"])(s,n,i,!1,null,"300e9fbe",null);a["default"]=d.exports},b0c0:function(t,a,e){var n=e("83ab"),i=e("9bf2").f,o=Function.prototype,s=o.toString,l=/^\s*function ([^ (]*)/,d="name";!n||d in o||i(o,d,{configurable:!0,get:function(){try{return s.call(this).match(l)[1]}catch(t){return""}}})},b64b:function(t,a,e){var n=e("23e7"),i=e("7b0b"),o=e("df75"),s=e("d039"),l=s((function(){o(1)}));n({target:"Object",stat:!0,forced:l},{keys:function(t){return o(i(t))}})},b70c:function(t,a,e){}}]);
//# sourceMappingURL=chunk-4181eb8d.2675aec6.js.map